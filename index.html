<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ztools</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Main CSS -->
    <link rel="stylesheet" href="/assets/main.css">
    <head>
        
         
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
        

        <!-- Rest of your existing head content -->
    </head>
    
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar"> 
        <div class="text-center mb-4">
            <h4 class="text-white fw-bold">
                <a href="index.html" class="text-white text-decoration-none">Z-Tools</a>
            </h4>
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="#" data-section="quiklinks">
                    <i class=" bi bi-link-45deg"></i>
                    <span>Quik Links</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="csvfilter">
                    <i class="bi bi-filetype-csv"></i>
                    <span>CSV Filter</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="buyavgc">
                    <i class="bi bi-calculator-fill"></i>
                    <span>Buy Avg Calc</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="splitbonus">
                    <i class="bi bi-hr"></i>
                    <span>Split & Bonus</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="ifsc">
                    <i class="bi bi-bank"></i>
                    <span>IFSC Finder</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="penaltycalc">
                    <i class="bi bi-cash-stack"></i>
                    <span>Penalty Calc</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="splitbonuspro">
                    <i class="bi bi-bar-chart-steps"></i>
                    <span>Split & Bonus <span class="badge bg-primary">pro</span></span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="about">
                    <i class="bi bi-person-fill"></i>
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1"><!--for future use--></span>
            <div class="d-flex">
                <span class="navbar-text me-3">
                    
                </span>
                <span class="navbar-text">
                    <!--for future use-->
                </span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content" style="margin-top: 80px;">
        <!-- Quiklinks Section -->
   <section id="quiklinks-section" class="content-section">
        <div class="row mb-4">
            <!-- <div class="col-12">
                <div class="card">
                    <div class="card-body text-center py-4">
                        <i class="bi bi-house-door text-primary" style="font-size: 1.5rem;"></i>
                        <p class="text-muted">Quick links </p>
                    </div>
                </div>
            </div> -->
        </div>
     
        <!-- Quick Links Section -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-link-45deg me-2"></i>Quick Links
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row" id="quick-links-container">
                            <!-- Links will load here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>   
    </section>
            <!-- Other sections (hidden by default) -->




    <!-- CSV Filter Section -->
    <section id="csvfilter-section" class="content-section" style="display: none;">
        <div class="container-fluid px-0">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="mb-3 display-6">CSV Column Comparator</h2>
                    <p class="text-muted mb-0 alert alert-primary" style="max-width: 700px;">
                        Upload two CSV files and compare the values in selected columns. This tool helps you quickly find values that are unique to each file.
                    </p>
                </div>
            </div>
            <!-- CSV Upload Section -->
            <div class="row g-4 mb-4">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-file-earmark-spreadsheet me-2"></i>Upload First CSV File
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="file" class="form-control" id="csvFile1" accept=".csv" onchange="handleFileUpload(1)">
                            </div>
                            <div id="file1Status" class="text-muted">No file selected</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-file-earmark-spreadsheet me-2"></i>Upload Second CSV File
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="file" class="form-control" id="csvFile2" accept=".csv" onchange="handleFileUpload(2)">
                            </div>
                            <div id="file2Status" class="text-muted">No file selected</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Column Selection Section -->
            <div class="row g-4 mb-4 mt-5" id="columnSelectionSection" style="display: none;">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Select Column from First CSV</h5>
                        </div>
                        <div class="card-body">
                            <select class="form-select" id="column1Dropdown" onchange="generateUniqueValues()">
                                <option value="">Select a column...</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Select Column from Second CSV</h5>
                        </div>
                        <div class="card-body">
                            <select class="form-select" id="column2Dropdown" onchange="generateUniqueValues()">
                                <option value="">Select a column...</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mb-2" id="postfixFilterOption" style="display:none;">
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="ignorePostfixCheck" onchange="generateUniqueValues()">
                        <label class="form-check-label" for="ignorePostfixCheck">
                            Treat values like "ABC" and "ABC-BZ/BE/RE" as matching
                        </label>
                    </div>
                </div>
            </div>
            <div class="row mb-2" id="isinFilterOption" style="display:none;">
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="ignoreIsinCheck" onchange="generateUniqueValues()">
                        <label class="form-check-label" for="ignoreIsinCheck">
                            Ignore values that are ISIN numbers in result
                        </label>
                    </div>
                </div>
            </div>
            
            
            
            <!-- Results Section -->
            <div class="row" id="resultsSection" style="display: none;">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex flex-wrap justify-content-between align-items-center gap-2">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-table me-2"></i>Comparison Results: Unique & Common Values
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="mb-2">
                                        <h6 class="text-warning" id="file1ResultHeader">
                                            <i class="bi bi-exclamation-triangle me-1"></i>
                                            Only in File 1
                                        </h6>
                                        
                                    </div>
                                    <div class="table-responsive" style="max-height: 400px;">
                                        <table class="table table-striped table-hover mb-0">
                                            <thead class="table-dark sticky-top">
                                                <tr>
                                                    <th style="width: 3rem;">#</th>
                                                    <th>Exclusive Values</th>
                                                </tr>
                                            </thead>
                                            <tbody id="uniqueValues1">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="text-muted mt-2">
                                        Values only in File 1: <span id="count1" class="fw-bold">0</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-2">
                                        <h6 class="text-info" id="file2ResultHeader">
                                            <i class="bi bi-info-circle me-1"></i>
                                            Only in File 2
                                        </h6>
                                        
                                        
                                    </div>
                                    <div class="table-responsive" style="max-height: 400px;">
                                        <table class="table table-striped table-hover mb-0">
                                            <thead class="table-dark sticky-top">
                                                <tr>
                                                    <th style="width: 3rem;">#</th>
                                                    <th>Exclusive Values</th>
                                                </tr>
                                            </thead>
                                            <tbody id="uniqueValues2">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="text-muted mt-2">
                                        Values only in File 2: <span id="count2" class="fw-bold">0</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Comparison Summary -->
                            <div class="row g-4 mt-4">
                                <div class="col-md-4">
                                    <div class="card bg-success text-white h-100">
                                        <div class="card-body text-center">
                                            <h5 id="commonCount" class="mb-1">0</h5>
                                            <small>Common Values</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-warning text-white h-100">
                                        <div class="card-body text-center">
                                            <h5 id="uniqueToFile1" class="mb-1">0</h5>
                                            <small>Only in File 1</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-info text-white h-100">
                                        <div class="card-body text-center">
                                            <h5 id="uniqueToFile2" class="mb-1">0</h5>
                                            <small>Only in File 2</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- card-body -->
                    </div>
                </div>
            </div>
        </div>
    </section>
        
    <!-- Buy Average Calculator -->

    <section id="buyavgc-section" class="content-section" style="display: none;">
            <h2 class="mb-4">
              
                <button class="btn btn-outline-secondary btn ms-3" onclick="resetCalculator()">
                    <i class="bi bi-arrow-clockwise me-1"></i>Reset
                </button>
            </h2>
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card stats-card-3">
                        <div class="card-body text-center">
                            <i class="bi bi-basket-fill" style="font-size: 2rem;"></i>
                            <h3 class="mt-2" id="totalQuantity">0</h3>
                            <p class="mb-0">Total Quantity</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card stats-card-2">
                        <div class="card-body text-center">
                            <i class="bi bi-currency-rupee" style="font-size: 2rem;"></i>
                            <h3 class="mt-2">₹<span id="avgPrice">0.00</span></h3>
                            <p class="mb-0">Buy Average</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card stats-card">
                        <div class="card-body text-center">
                            <i class="bi bi-cash-stack" style="font-size: 2rem;"></i>
                            <h3 class="mt-2">₹<span id="totalInvestment">0.00</span></h3>
                            <p class="mb-0">Total Investment</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-list-ol me-2"></i>Stock Trades
                    </h5>
                    <button class="btn btn-primary btn-sm" onclick="addTradeRow()">
                        <i class="bi bi-plus-circle me-1"></i>Add Trade
                    </button>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th width="10%">#</th>
                                    <th width="30%">Quantity</th>
                                    <th width="30%">Price (₹)</th>
                                    <th width="20%">Total Amount (₹)</th>
                                    <th width="10%">Action</th>
                                </tr>
                            </thead>
                            <tbody id="tradesTableBody">
                                <tr id="trade-1">
                                    <td class="align-middle">
                                        <span class="badge bg-primary">1</span>
                                    </td>
                                    <td>
                                        <input type="number" class="form-control trade-qty" 
                                               placeholder="Enter quantity" 
                                               min="1" step="1" onchange="calculateTotals()">
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <span class="input-group-text">₹</span>
                                            <input type="number" class="form-control trade-price" 
                                                   placeholder="Enter price" 
                                                   step="0.01" onchange="calculateTotals()">
                                        </div>
                                    </td>
                                    <td class="align-middle">
                                        <span class="fw-bold text-success trade-total">₹0.00</span>
                                    </td>
                                    <td class="align-middle">
                                        <button class="btn btn-outline-danger btn-sm" 
                                                onclick="removeTradeRow(1)" disabled>
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr id="trade-2">
                                    <td class="align-middle">
                                        <span class="badge bg-primary">2</span>
                                    </td>
                                    <td>
                                        <input type="number" class="form-control trade-qty" 
                                               placeholder="Enter quantity" 
                                               min="1" step="1" onchange="calculateTotals()">
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <span class="input-group-text">₹</span>
                                            <input type="number" class="form-control trade-price" 
                                                   placeholder="Enter price" 
                                                   step="0.01" onchange="calculateTotals()">
                                        </div>
                                    </td>
                                    <td class="align-middle">
                                        <span class="fw-bold text-success trade-total">₹0.00</span>
                                    </td>
                                    <td class="align-middle">
                                        <button class="btn btn-outline-danger btn-sm" 
                                                onclick="removeTradeRow(2)">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="bi bi-info-circle me-1"></i>
                            Enter quantity and price for each trade to calculate your average buy price.
                           
                        </small>
                    </div>
                </div>
            </div>
            <div class="alert alert-primary mt-5">
                Use this to calculate the weighted average of stock.Or expected buy average
                for example:
                If you hold <b>100 qty</b> of stock at <b>₹90</b>, 
                what will be your new buy average if you purchase an additional 
                <b>50 qty</b> of the same stock at <b>₹70</b>?
            </div>
    </section>

    <!-- Stock Split & Bonus Calculator -->
       
         
        <section id="splitbonus-section" class="content-section" style="display: none;">
        
       
        

            <!-- Corporate Action Selection -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-gear me-2"></i>Select Corporate Action
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="splitAction" onchange="toggleActionInputs()">
                                        <label class="form-check-label fw-bold" for="splitAction">
                                            <i class="bi bi-scissors me-1 text-primary"></i>Stock Split
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline ms-4">
                                        <input class="form-check-input" type="checkbox" id="bonusAction" onchange="toggleActionInputs()">
                                        <label class="form-check-label fw-bold" for="bonusAction">
                                            <i class="bi bi-gift me-1 text-success"></i>Bonus Issue
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <small class="text-muted">
                                        <i class="bi bi-info-circle me-1"></i>
                                        You can select one or both corporate actions to calculate combined effect
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Input Parameters -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-basket me-2"></i>Current Holdings
                            </h6>
                        </div>
                        <div class="card-body">
                            <label for="currentQty" class="form-label">Current Quantity</label>
                            <input type="number" class="form-control mb-2" id="currentQty" placeholder="Enter current shares" min="1" step="1" onchange="calculateSplitBonus()">
                            <label for="currentPrice" class="form-label mt-2">Current Price (per share)</label>
                            <input type="number" class="form-control" id="currentPrice" placeholder="Enter price per share" min="0.01" step="0.01" onchange="calculateSplitBonus()">
                        </div>
                    </div>
                </div>
                <div class="col-md-4" id="splitRatioCard" style="display: none;">
                    <div class="card border-primary">
                        <div class="card-header bg-primary text-white">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-scissors me-2"></i>Split Ratio
                            </h6>
                        </div>
                        <div class="card-body">
                            <label for="splitRatio" class="form-label">Split Ratio (New:Old)</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="splitRatioNew" placeholder="2" min="1" step="1" onchange="calculateSplitBonus()">
                                <span class="input-group-text">:</span>
                                <input type="number" class="form-control" id="splitRatioOld" placeholder="1" min="1" step="1" onchange="calculateSplitBonus()">
                            </div>
                            <small class="text-muted">Example: 2:1 means 2 new shares for 1 old share</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4" id="bonusRatioCard" style="display: none;">
                    <div class="card border-success">
                        <div class="card-header bg-success text-white">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-gift me-2"></i>Bonus Ratio
                            </h6>
                        </div>
                        <div class="card-body">
                            <label for="bonusRatio" class="form-label">Bonus Ratio (Free:Held)</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="bonusRatioFree" placeholder="1" min="1" step="1" onchange="calculateSplitBonus()">
                                <span class="input-group-text">:</span>
                                <input type="number" class="form-control" id="bonusRatioHeld" placeholder="2" min="1" step="1" onchange="calculateSplitBonus()">
                            </div>
                            <small class="text-muted">Example: 1:2 means 1 free share for 2 held shares</small>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Stats Cards -->

            <!-- Result Section -->
            <div class="row mb-3" id="resultSection" style="display: none;">
                <div class="col-12">
                    <div class="card mb-2">
                        <div class="card-body py-2">
                            <div class="d-flex justify-content-between align-items-center flex-wrap w-100 mb-2" style="gap: 0;">
                                <div class="flex-fill text-center">
                                    <span class="badge bg-success fs-6">
                                        <i class="bi bi-arrow-up-circle me-1"></i>
                                        <span id="finalQuantity">0</span>
                                    </span>
                                    <small class="d-block text-muted">Final Quantity</small>
                                </div>
                                <div class="flex-fill text-center">
                                    <span class="badge bg-primary fs-6">
                                        <i class="bi bi-plus-circle me-1"></i>
                                        <span id="addedShares">0</span>
                                    </span>
                                    <small class="d-block text-muted">Added Shares</small>
                                </div>
                                <div class="flex-fill text-center">
                                    <span class="badge bg-warning fs-6">
                                        <i class="bi bi-percent me-1"></i>
                                        <span id="increasePercent">0%</span>
                                    </span>
                                    <small class="d-block text-muted">Increase</small>
                                </div>
                                <div class="flex-fill text-center">
                                    <span class="badge bg-info fs-6">
                                        <i class="bi bi-x me-1"></i>
                                        <span id="multiplier">1.00x</span>
                                    </span>
                                    <small class="d-block text-muted">Multiplier</small>
                                </div>
                                <div class="flex-fill text-center">
                                    <span class="badge bg-dark fs-6">
                                        <i class="bi bi-currency-rupee me-1"></i>
                                        <span id="finalPrice">0.00</span>
                                    </span>
                                    <small class="d-block text-muted">Final Per Share Price</small>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
    
            <!-- Trades Breakdown -->
            <div class="card" id="tradesBreakdown" style="display: none;">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-table me-2"></i>Trades Breakdown
                    </h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th width="10%">#</th>
                                    <th width="25%">Trade Type</th>
                                    <th width="20%">Quantity</th>
                                    <th width="20%">Action</th>
                                    <th width="25%">Description</th>
                                </tr>
                            </thead>
                            <tbody id="tradesBreakdownBody">
                                <!-- Dynamic content will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-primary">Calculation Details:</h6>
                                <div id="calculationDetails">
                                    <!-- Calculation steps will be shown here -->
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-success">Corporate Action Summary:</h6>
                                <div id="actionSummary">
                                    <!-- Action summary will be shown here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
          
        </section>
        <!-- IFSC Code Validator & Bank Details -->
        <section id="ifsc-section" class="content-section" style="display: none;">
            <h2 class="mb-4">
                <i class="bi bi-bank me-2"></i>IFSC Code Validator
                <button class="btn btn-outline-secondary btn-sm ms-3" onclick="clearIFSCForm()">
                    <i class="bi bi-arrow-clockwise me-1"></i>Clear
                </button>
            </h2>

            <!-- IFSC Input Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-search me-2"></i>Enter IFSC Code
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-text">
                                            <i class="bi bi-bank2"></i>
                                        </span>
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="ifscInput"
                                            placeholder="Enter IFSC Code (e.g., SBIN0001234)"
                                            maxlength="11"
                                            style="text-transform: uppercase;"
                                            oninput="handleIFSCInput()"
                                            onpaste="setTimeout(handleIFSCInput, 10)"
                                        >
                                        <button
                                            class="btn btn-primary"
                                            type="button"
                                            onclick="validateIFSC()"
                                            id="validateBtn"
                                        >
                                            <i class="bi bi-search me-1"></i>Validate
                                        </button>
                                    </div>
                                    <div class="form-text">
                                        <i class="bi bi-info-circle me-1"></i>
                                        IFSC codes are 11 characters long (4 letters + 1 zero + 6 digits)
                                    </div>
                                </div>
                                <div class="col-md-4 d-flex align-items-center">
                                    <div id="validationStatus" class="text-center w-100">
                                        <small class="text-muted">Enter IFSC code to validate</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Auto-correction Suggestions -->
            <div class="row mb-4" id="suggestionsSection" style="display: none;">
                <div class="col-12">
                    <div class="alert alert-warning">
                        <h6 class="alert-heading">
                            <i class="bi bi-exclamation-triangle me-2"></i>Possible Corrections Found
                        </h6>
                        <p class="mb-2">The IFSC code you entered might have some common errors. Try these corrections:</p>
                        <div id="suggestionsList" class="d-flex flex-wrap gap-2">
                            <!-- Suggestions will be dynamically added here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading Section -->
            <div class="row mb-4" id="loadingSection" style="display: none;">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body text-center py-4">
                            <div class="spinner-border text-primary mb-3" role="status"></div>
                            <h5>Validating IFSC Code...</h5>
                            <p class="text-muted mb-0">Please wait while we fetch bank details</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bank Details Section -->
            <div class="row mb-4" id="bankDetailsSection" style="display: none;">
                <div class="col-12">
                    <div class="card border-success">
                        <div class="card-header bg-success text-white">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-check-circle me-2"></i>Bank Details Found
                            </h5>
                        </div>
                        <div class="card-body">
                            <!-- Bank Summary Cards -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="card bg-primary text-white">
                                        <div class="card-body text-center py-3">
                                            <i class="bi bi-building" style="font-size: 1.5rem;"></i>
                                            <h6 class="mt-2 mb-0" id="bankName">Bank Name</h6>
                                            <small>Bank</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-info text-white">
                                        <div class="card-body text-center py-3">
                                            <i class="bi bi-geo-alt" style="font-size: 1.5rem;"></i>
                                            <h6 class="mt-2 mb-0" id="branchName">Branch</h6>
                                            <small>Branch</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-warning text-white">
                                        <div class="card-body text-center py-3">
                                            <i class="bi bi-pin-map" style="font-size: 1.5rem;"></i>
                                            <h6 class="mt-2 mb-0" id="cityName">City</h6>
                                            <small>City</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-success text-white">
                                        <div class="card-body text-center py-3">
                                            <i class="bi bi-map" style="font-size: 1.5rem;"></i>
                                            <h6 class="mt-2 mb-0" id="stateName">State</h6>
                                            <small>State</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Detailed Information -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">
                                                <i class="bi bi-info-circle me-2"></i>Bank Information
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <table class="table table-sm">
                                                <tr>
                                                    <td class="fw-bold">IFSC Code:</td>
                                                    <td><code id="ifscCode"></code></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold">Bank Code:</td>
                                                    <td><span id="bankCode"></span></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold">MICR Code:</td>
                                                    <td><span id="micrCode"></span></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold">SWIFT Code:</td>
                                                    <td><span id="swiftCode"></span></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">
                                                <i class="bi bi-geo me-2"></i>Address Details
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <table class="table table-sm">
                                                <tr>
                                                    <td class="fw-bold">Address:</td>
                                                    <td><span id="addressDetails"></span></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold">District:</td>
                                                    <td><span id="districtName"></span></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold">Centre:</td>
                                                    <td><span id="centreName"></span></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold">Contact:</td>
                                                    <td><span id="contactInfo"></span></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Services Available -->
                            <div class="row mt-3">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">
                                                <i class="bi bi-credit-card me-2"></i>Available Services
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="row text-center">
                                                <div class="col-md-2 col-4 mb-2">
                                                    <div id="rtgsService" class="service-indicator">
                                                        <i class="bi bi-arrow-left-right fs-4"></i>
                                                        <div class="fw-bold">RTGS</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2 col-4 mb-2">
                                                    <div id="neftService" class="service-indicator">
                                                        <i class="bi bi-bank fs-4"></i>
                                                        <div class="fw-bold">NEFT</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2 col-4 mb-2">
                                                    <div id="impsService" class="service-indicator">
                                                        <i class="bi bi-lightning fs-4"></i>
                                                        <div class="fw-bold">IMPS</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2 col-4 mb-2">
                                                    <div id="upiService" class="service-indicator">
                                                        <i class="bi bi-phone fs-4"></i>
                                                        <div class="fw-bold">UPI</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Section -->
            <div class="row mb-4" id="errorSection" style="display: none;">
                <div class="col-12">
                    <div class="alert alert-danger">
                        <h6 class="alert-heading">
                            <i class="bi bi-exclamation-circle me-2"></i>IFSC Code Not Found
                        </h6>
                        <p id="errorMessage" class="mb-0">The IFSC code you entered is not valid or doesn't exist.</p>
                    </div>
                </div>
            </div>
            <div class="alert alert-primary mb-4" style="max-width: 700px;">
                The IFSC fetched from <a href="https://ifsc.razorpay.com/" target="_blank">Razorpay</a> api.
            </div>
        </section>
        
        <!-- Margin Penalty Calculator -->
        <section id="penaltycalc-section" class="content-section" style="display: none;">
            <h2 class="mb-4">
                <i class="bi bi-calculator-fill me-2"></i>Margin Penalty Calculator
                <button class="btn btn-outline-secondary btn-sm ms-3" onclick="resetMarginCalculator()">
                    <i class="bi bi-arrow-clockwise me-1"></i>Reset
                </button>
            </h2>
            
            <!-- Input Section -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-cash-stack me-2"></i>Margin Details
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="requiredMargin" class="form-label">Required Margin</label>
                                <div class="input-group">
                                    <span class="input-group-text">₹</span>
                                    <input type="number" class="form-control" id="requiredMargin" 
                                           placeholder="Enter required margin" 
                                           min="0" step="0.01" onchange="calculatePenalty()">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="availableMargin" class="form-label">Available Margin</label>
                                <div class="input-group">
                                    <span class="input-group-text">₹</span>
                                    <input type="number" class="form-control" id="availableMargin" 
                                           placeholder="Enter available margin" 
                                           min="0" step="0.01" onchange="calculatePenalty()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-calendar-event me-2"></i>Additional Penalty
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="consecutiveDaysCheck" onchange="calculatePenalty()">
                                <label class="form-check-label" for="consecutiveDaysCheck">
                                    <strong>Shortfall continues for more than 3 consecutive days</strong>
                                </label>
                            </div>
                            <small class="text-muted mt-2 d-block">
                                <i class="bi bi-info-circle me-1"></i>
                                Additional 5% penalty applies if shortfall persists beyond 3 consecutive days
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- Shortfall Summary -->
            <div class="row mb-4" id="shortfallSection" style="display: none;">
                <div class="col-12">
                    <div class="card border-warning">
                        <div class="card-header bg-warning text-dark">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-exclamation-triangle me-2"></i>Margin Shortfall Detected
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row text-center">
                                <div class="col-md-4">
                                    <div class="border rounded p-3">
                                        <i class="bi bi-arrow-down-circle text-danger fs-3"></i>
                                        <h5 class="text-danger mt-2">₹<span id="shortfallAmount">0</span></h5>
                                        <small class="text-muted">Shortfall Amount</small>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="border rounded p-3">
                                        <i class="bi bi-percent text-warning fs-3"></i>
                                        <h5 class="text-warning mt-2"><span id="shortfallPercentage">0</span>%</h5>
                                        <small class="text-muted">of Required Margin</small>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="border rounded p-3" id="consecutiveIndicator">
                                        <i class="bi bi-calendar-x text-muted fs-3"></i>
                                        <h6 class="text-muted mt-2">No Extended Penalty</h6>
                                        <small class="text-muted">≤ 3 Days</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- Penalty Calculation -->
            <div class="row mb-4" id="penaltySection" style="display: none;">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-calculator me-2"></i>Penalty Calculation Breakdown
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tbody id="penaltyBreakdown">
                                        <!-- Penalty breakdown will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card border-danger">
                        <div class="card-header bg-danger text-white text-center">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-exclamation-triangle me-2"></i>Total Penalty
                            </h6>
                        </div>
                        <div class="card-body text-center">
                            <div class="mb-3">
                                <h6 class="text-muted">Base Penalty</h6>
                                <h4 class="text-warning">₹<span id="basePenalty">0.00</span></h4>
                            </div>
                            <div class="mb-3">
                                <h6 class="text-muted">GST (18%)</h6>
                                <h4 class="text-info">₹<span id="gstAmount">0.00</span></h4>
                            </div>
                            <hr>
                            <div>
                                <h6 class="text-muted">Final Amount</h6>
                                <h3 class="text-danger fw-bold">₹<span id="finalPenalty">0.00</span></h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- Penalty Rules Reference -->
            <div class="row">
                <div class="col-12">
                    <div class="card bg-light">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-info-circle me-2"></i>Penalty Rules Reference
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary">Basic Penalty Rates:</h6>
                                    <ul class="list-unstyled">
                                        <li><span class="badge bg-success me-2">0.5%</span> if shortfall is &lt; ₹1 lakh AND &lt; 10% of required margin</li>
                                        <li><span class="badge bg-warning me-2">1.0%</span> if shortfall is ≥ ₹1 lakh OR ≥ 10% of required margin</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-primary">Additional Penalties:</h6>
                                    <ul class="list-unstyled">
                                        <li><span class="badge bg-danger me-2">5.0%</span> if shortfall continues for more than 3 consecutive days</li>
                                        <li><span class="badge bg-info me-2">18%</span> GST on total penalty amount</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Split & Bonus Pro Section -->
        <section id="splitbonuspro-section" class="content-section" style="display: none;">
            <h2 class="mb-4">
                <i class="bi bi-bar-chart-steps me-2"></i>Split & Bonus Pro
                <button class="btn btn-outline-secondary btn-sm ms-3" onclick="resetSplitBonusPro()">
                    <i class="bi bi-arrow-clockwise me-1"></i>Reset
                </button>
                
            </h2>
           
        
            <!-- Action Buttons -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-plus-square me-2"></i>Add Transaction
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3 mb-2">
                                    <button class="btn btn-primary w-100" onclick="addTransaction('BUY')">
                                        <i class="bi bi-cart-plus me-1"></i>Add Buy
                                    </button>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <button class="btn btn-danger w-100" onclick="addTransaction('SELL')">
                                        <i class="bi bi-cart-dash me-1"></i>Add Sell
                                    </button>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <button class="btn btn-secondary w-100" onclick="addTransaction('SPLIT')">
                                        <i class="bi bi-scissors me-1"></i>Add Split
                                    </button>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <button class="btn btn-success w-100" onclick="addTransaction('BONUS')">
                                        <i class="bi bi-gift me-1"></i>Add Bonus
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- Status Panel -->
            <div class="row mb-4" id="statusPanel">
                <!-- Status cards will be populated here -->
            </div>
        
            <!-- Transactions Table -->
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-table me-2"></i>Transaction History
                    </h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th width="5%">#</th>
                                    <th width="10%">Type</th>
                                    <th width="15%">Quantity/Ratio</th>
                                    <th width="12%">Price</th>
                                    <th width="12%">Holdings</th>
                                    <th width="12%">Avg Price</th>
                                    <th width="20%">Details</th>
                                    <th width="14%">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsTable">
                                <!-- Transactions will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        
            <!-- Summary Section -->
            <div class="row mt-4" id="summarySection" style="display: none;">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-graph-up me-2"></i>Portfolio Summary
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary">Investment Summary:</h6>
                                    <div id="investmentSummary">
                                        <!-- Investment details will be shown here -->
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-success">Corporate Actions Impact:</h6>
                                    <div id="corporateActionsSummary">
                                        <!-- Corporate actions summary will be shown here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </section>
        

        <!-- Ledger Recon Section -->
        <section id="ledgerrecon-section" class="content-section" style="display: none;">
            <div class="alert alert-primary"> </div>
        </section>
        

        <!-- About Section -->
        <section id="about-section" class="content-section" style="display: none;">
            <h2 class="mb-4">
                <i class="bi bi-info-circle me-2"></i>About
            </h2>
            <div class="card mb-3 aboutcard">
                <div class="card-body ">
                    <p>
                        This utility tool was built by <b>Tahur</b> &#128526; — initially just for fun and for my own use.
                    <ul>
                        <li>Yes, you can totally do most of this in Excel, but this tool will save you at least 2 seconds (and likely a few sighs) each time!</li>
                        <li>Edge cases? Haven’t tested much. If you break it or get a wrong result, please accept my heartfelt ¯\_(ツ)_/¯ .</li>
                        <li>Most major code chunks were <i>generated by Claude and Cursor</i> , so if something pops, blame the bots &#129302;!</li>
                        <li>CSV parsing is all thanks to <a href="https://www.papaparse.com/" target="_blank">Papa Parse</a>, and data never passed to any server.</li>
                        
                    </ul>
                    <hr>
                    <div>
                        <b>You can view the code on</b> 
                        <a href="https://github.com/tahurmd/ztools" target="_blank"> <i class="bi bi-github me-2"></i>GitHub</a>.
                        <br>
                        <b>Suggestions? Bugs?</b> or Show some love on <a href="mailto:mdtahur@gmail.com">mdtahur@gmail.com</a> or ping me(you know where).
                    </div>
                    <div class="text-muted mt-3 mb-0" style="font-size:0.95em;">
                        Have fun, and may your calculations always be correct! &#128522;
                    </div>
                </div>
            </div>
        </section>
        
        
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="components/quicklinks.js"></script>
    <script src="components/csvfilter.js"></script>
    <script src="components/splitbonus.js"></script>
    <script src="components/ifscvalidator.js"></script>
    <script src="components/penaltycalc.js"></script>
    <script src="components/buyavgcalc.js"></script> 
    <script src="components/splitbonuspro.js"></script>
    <script src="components/ledgerrecon.js"></script>
    <script src="main.js"></script>
    <script src="script.js"></script>

</body>
</html>
